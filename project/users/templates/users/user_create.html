<!-- templates/users/user_create.html -->

{% extends 'layout.html' %}

{% block head %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        active = document.getElementsByTagName('li');
        active[2].className = "active";

        errors = document.getElementsByClassName("errorlist");
        if (errors.length > 0) {
            Object.values(errors).every(function(error){error.classList.add("red-text");});
        };
    });
</script>
{% endblock %}

{% block title %}Registrieren{% endblock %}

{% block content %}
<div class="row">
    <div class="col s12">
        <h2>Registrieren</h2>
        <form action="{% url 'users:user-signup' %}" method="post" enctype="multipart/form-data">
            <div class="row">
                {% csrf_token %}
                {% for hidden in form.hidden_fields %}
                    {{ hidden }}
                {% endfor %}

                {% for field in form.visible_fields %}
                    {% if field.label == 'Profilbild' %}
                        <div class="file-field input-field col s12">
                            <p>
                                <label for="{{ field.id_for_label }}">{{ field.label }}:</label>
                                <div class="btn">
                                    <span>Datei ausw√§hlen</span>
                                    <input id="{{ field.id_for_label }}" type="file" accept="image/*" name="avatar">
                                </div>
                                <div class="file-path-wrapper">
                                    <input class="file-path validate" type="text">
                                </div>
                                <span class="helper-text">{{ field.help_text }}</span>
                                {{ field.errors }}
                            </p>
                        </div>
                    {% else %}
                        {% include "field_snippet.html" with field=field size="s12" %}
                    {% endif %}
                {% endfor %}
                <div class="col s12 center-align">
                    <button class="btn" type="submit">Registrieren</button>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}