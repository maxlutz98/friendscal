<!-- templates/users/user_update.html -->

{% extends 'layout.html' %}

{% block head %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('select');
            var instances = M.FormSelect.init(elems);
        });
    </script>
{% endblock %}

{% block title %}Update{% endblock %}

{% block content %}
    <h2>Update</h2>
    <form action="{% url 'users:user-change' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {% for field in form %}
            {% if field.label == 'Profile picture' %}
                <p class="fieldWrapper">
                    {{ field.errors }}
                    {{ field.label_tag }}
                    <br>
                    <img src="{{ object.avatar.url }}" width=100>
                    <br>
                    <input id="id_avatar" type="file" accept="image/*" name="avatar">
                </p>
            {% elif field.label == 'Shares' %}
            {% else %}
                <p class="fieldWrapper">
                    {{ field.errors }}
                    {{ field.label_tag }} {{ field }}
                </p>
            {% endif %}
        {% endfor %}
        <button class="btn blue lighten-2" type="submit">Update</button>
    </form>
{% endblock %}